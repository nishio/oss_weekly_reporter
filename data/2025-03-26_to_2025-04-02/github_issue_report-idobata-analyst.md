# GitHub Issue レポート: digitaldemocracy2030/idobata-analyst

期間: 2025-03-26 から 2025-04-02 まで

## 過去1週間に完了されたissue (8件)

### [新規改善提案がProjectに自動で追加されるかテスト](https://github.com/digitaldemocracy2030/idobata-analyst/issues/87)

**作成者:** jujunjun110  
**作成日:** 2025-03-29T05:23:47Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-31T06:23:37Z):

たぶんテストなので閉じ

---

### [ビジュアル分析のリンク追加](https://github.com/digitaldemocracy2030/idobata-analyst/issues/83)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T06:38:35Z  
**内容:**

## 解決・改善したいこと
投稿:314 いいね数5の投稿の分割
- そのトピックの論点整理モジュールへのリンクをフッターに入れる:
  - QRコードでも良い
  - 論点整理モジュールはトピックのタイトルをネットで検索しても出てこないので導線を作る
  
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/50
## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:46:51Z):

- 画像でシェアする想定なら URL 手打ちはしんどいので QR コードになりそう
- ただ、画像の上に乗っている URL や QR コードをわざわざ開く人はほとんどいないはず（手間がかかるので）
- SNS シェア導線でシェア時のデフォルトメッセージに URL を入れておくのが自然で遷移率高そう
    - ただ、最近の X では URL 入り投稿は imp 減ってしまう件とは相性が良くない... https://www.watch.impress.co.jp/docs/news/1642725.html


- **jujunjun110** (2025-03-29T07:45:26Z):

https://github.com/digitaldemocracy2030/idobata-analyst/issues/81

と同様なのでこちらはCloseします

---

### [意図しない要約の防止](https://github.com/digitaldemocracy2030/idobata-analyst/issues/76)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T01:39:59Z  
**内容:**

## 解決・改善したいこと

投稿:akinori いいね数1の投稿
ダウンロードに「 論点整理モジュール」と話した内容も含んでほしいです。または、「AI と議論した内容もAI レポートに反映される」とのことなので、反映の有無と可能であれば反映する内容を指定したいです。意見を所有したいわけではないですが、意図しない文言での反映が行われるのを避けたいです。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/12
投稿:akinori いいね数1の投稿の分割
![Image](https://github.com/user-attachments/assets/46e2cdd6-a0bf-4c0c-993a-d5f55cacb404)
また、要約時の編集によって、意図していない内容に変わる可能性もあります。「同時に多様な学び方に触れる必要があります」と記載したのですが、「同一人物であっても多様な学び方に触れる機会を提供する必要がある」となって記録されました。

論理的な漏れや異なる意図に解釈できる場合には、念のため確認してくれる方が嬉しいかもしれません。また、本返信の時に実施してもらえると、より解釈が割れないような返信にできるのかもしれません。

こうあるべきだ、とお伝えしているわけではありません。何かの参考になりましたら嬉しいです。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/13

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:08:52Z):

https://github.com/digitaldemocracy2030/idobata-analyst/issues/39 と似た内容なので、そちらで解消できるかもしれない

- **jujunjun110** (2025-03-29T06:22:48Z):

精度をなるべく上げることでなるべく不満を発生しにくくすることしかできなそう
#39 に吸収する形でCloseします

---

### [レポートの用途解説](https://github.com/digitaldemocracy2030/idobata-analyst/issues/74)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T01:10:27Z  
**内容:**

## 解決・改善したいこと

投稿:westcoaster いいね数1の投稿の分割
AI教育のところでレポートが投稿されたが、このレポートで示された新しい論点しか議論しちゃいけないわけじゃないんですよね？このレポートをどう使ってほしいかもうちょっと説明があった方が親切な気がしました（論点の整理・議論を深めたいポイントの提示だけど、元々の論点についても引き続きコメントしていいんですよね）
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/5

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **jujunjun110** (2025-03-29T07:56:13Z):

ファシリテーションの改善にマージしてこのトピックはClose

---

### [Devcontainerを導入することで、lint/auto formatの設定をしやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/50)

**作成者:** takker99  
**作成日:** 2025-03-20T05:32:01Z  
**内容:**

## 解決・改善したいこと

自分がNode.jsに不慣れだった点もありますが、Node.jsでlint & formatするのにどのvscode拡張機能を入れればいいか少し迷いました。
- dbaeumer.vscode-eslintとvscode.typescript-language-featuresを使えばいいみたい？

editorがvscodeに限られてしまいますが、Devcontainerを設定すれば、開発環境回りのトラブルを減らせると思います。
Github Codespaceでも動かせるので、手元で開発環境を用意できなくても、クラウド上ですぐに作業することができます。

ただ、monorepo相手だと設定がややこしいみたい？です。
- https://engineering.nifty.co.jp/blog/24158
- https://zenn.dev/izm/articles/3651766774c877
- https://product.st.inc/entry/2024/12/27/133252
- https://qiita.com/re_2osushi8888/items/e9df614f7b5182ae284d

一応提案としてissue立てておきますが、あんまり旨味ないかもです。


## 具体的な実現方法・実装方法の概要（未記入でも構いません）



**コメント:**

- **spinute** (2025-03-23T07:18:03Z):

linter, formatter 問題はこちらで対応してみました！（all biome にして vscode 用の設定ファイルを作成した）

https://github.com/digitaldemocracy2030/idobata-analyst/pull/55

- **jujunjun110** (2025-03-29T06:33:55Z):

これ関連IssueがマージされてそうなのでCloseします

---

### [論点分析レポートのクオリティを上げたい](https://github.com/digitaldemocracy2030/idobata-analyst/issues/44)

**作成者:** blu3mo  
**作成日:** 2025-03-17T09:41:26Z  
**内容:**

## 解決・改善したいこと
- 論点分析レポートの質を上げたい
  - 抽象度の高いタスクとして書いておきます。
- 例
  - https://delib.takahiroanno.com/projects/67d76376c29091a5f2fb8aa4/overall
  - https://w1740803485-clv347541.slack.com/archives/C08FF5MM59C/p1742203099858229
    - <img width="633" alt="Image" src="https://github.com/user-attachments/assets/1e4bfd8f-bbdc-4718-a44e-347f741190e7" />

## 具体的な実現方法・実装方法の概要（未記入でも構いません）
- パイプラインの各所で色々な改善が考えられる。サブイシューに分割していきたい
- 何か改善案があればどなたでも提案/実装ぜひ

**コメント:**

- **jujunjun110** (2025-03-20T11:12:54Z):

/assign

- **jujunjun110** (2025-03-20T11:13:55Z):

/unassign

- **jujunjun110** (2025-03-29T07:53:34Z):

ざっくりしており、下記などに受け継がれていると考えられるのでこれはCloseします

https://github.com/digitaldemocracy2030/idobata-analyst/issues/58

---

### [全体レポートのどこかに情報源の分布を追加する](https://github.com/digitaldemocracy2030/idobata-analyst/issues/19)

**作成者:** blu3mo  
**作成日:** 2025-03-12T02:13:16Z  
**内容:**

これ全体レポートのどこかに情報源の分布をかいておけるとよいかと
xが12件(xx%)、formがxx件(xx%)、みたいな

<img width="486" alt="Image" src="https://github.com/user-attachments/assets/528c8920-d24b-4cd2-a88f-f718ac18843a" />


**コメント:**

- **itoma-aikon** (2025-03-23T06:06:00Z):

プルリク送りました

- **jujunjun110** (2025-03-29T06:43:38Z):

LGTM

---

### [GoogleAnalyticsを導入する](https://github.com/digitaldemocracy2030/idobata-analyst/issues/11)

**作成者:** blu3mo  
**作成日:** 2025-03-12T02:06:15Z  
**内容:**

どっから来ていてどれくらい見られているのか？（コメント率どれくらいか）
を見るためにもGoogle Analyticsなどを入れたほうがよいのではないか

[Slack Message](https://annyotakagmailcom.slack.com/archives/C0858TLQSAY/p1741259594329899?thread_ts=1741254139.990899&cid=C0858TLQSAY)

**コメント:**

- **jujunjun110** (2025-03-26T10:55:29Z):

タグはこちら
<!-- Google tag (gtag.js) -->
<script async src=“https://www.googletagmanager.com/gtag/js?id=G-JS40565TKJ”></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag(‘js’, new Date());
  gtag(‘config’, ‘G-JS40565TKJ’);
</script>

---

## 過去1週間に作成されたissue (15件)

### [ビジュアル分析のモバイル表示対応](https://github.com/digitaldemocracy2030/idobata-analyst/issues/96)

**作成者:** spinute  
**作成日:** 2025-04-02T08:33:22Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

ビジュアル分析タブのレポートがモバイル端末の横幅が狭い画面で表示することをおそらく表示しておらず、読みにくい。

今の日本のインターネット利用は PC よりスマホが中心で、スマホで快適に閲覧できることは重要。

![Image](https://github.com/user-attachments/assets/00325e8f-03a3-4f6b-9446-a173b1e70ff2)

https://github.com/digitaldemocracy2030/idobata-analyst/pull/89 で余白を詰めてみたが、まだまだレイアウト的に見づらい。

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

ビジュアル分析のレポートをモバイル端末での表示を意識してリデザインし、実装する。

表面的なところでは、字下げと2カラム表示が縦長で横幅の狭いスマホ表示には向いていない気がする。ただ、別のやり方も色々ありそう。

**コメント:** なし

---

### [Biomeをrootで実行できるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/90)

**作成者:** takker99  
**作成日:** 2025-03-31T04:09:52Z  
**内容:**

## 解決・改善したいこと

[VS codeのBiome拡張機能](https://marketplace.visualstudio.com/items?itemName=biomejs.biome)でformatしようとしたら、biomejsがないと警告が出てしまいました。
[![Image from Gyazo](https://i.gyazo.com/9582ed8fd457ebbde8b53a7c389ec247.png)](https://gyazo.com/9582ed8fd457ebbde8b53a7c389ec247)
コードを見てみると、`packages/*/package.json`には`@biomejs/biome`が入っているものの、ルートには入っていないため、ルートでbiomeを探せずエラーが出ていたみたいです。
[![Image from Gyazo](https://i.gyazo.com/c46bf0183bbf4de9223b7f4b80566cdd.png)](https://gyazo.com/c46bf0183bbf4de9223b7f4b80566cdd)

初めての人でも躓かないよう、(vscode限定ですが)biomeをすぐ動かせるような状態にしたいです。

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

- npm workspaceを導入し、root directoryで`@biomejs/biome`を入れる
- すべてのpackagesのlintとformatを実行するnpm scriptsをroot directoryに導入
- 開発に使う拡張機能を`extensions.json`に入れる

**コメント:**

- **takker99** (2025-03-31T04:11:39Z):

ラベルの変更権限は一般ユーザーにはないみたいですかね？
infraラベルつけたほうがいいかなと思いました。

- **takker99** (2025-03-31T04:11:45Z):

/assign

---

### [新規改善提案がProjectに自動で追加されるかテスト](https://github.com/digitaldemocracy2030/idobata-analyst/issues/87)

**作成者:** jujunjun110  
**作成日:** 2025-03-29T05:23:47Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-31T06:23:37Z):

たぶんテストなので閉じ

---

### [議論の粒度をGoogleマップのズームのように行き来できるようにすることで、利用者が議論の全体像と詳細を両方理解できるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/85)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T07:23:53Z  
**内容:**

## 解決・改善したいこと
type:改善要望
summary: 
投稿:samo いいね数0の投稿の分割
- グーグルマップ式のズーム機能を導入
  - 全体像把握（10,000ft view）→ テーマ別クラスター → 個別意見の3段階表示
- 視覚的階層表現（色分け/サイズ調整による重要度表示）

※意見の誘導をしたのは投稿者だが、詳細を考えたのはAIとのこと
url: https://large-scale-conversation-sandbox.discourse.group/t/topic/45/52
投稿:itoma_aikon いいね数の投稿0の分割
ちょうどデジタル民主主義2030プロジェクトの広聴AI(ブロードリスニングのAI)にてズーム機能が実装されつつあるので、転用すると良さそうです。
url: https://large-scale-conversation-sandbox.discourse.group/t/topic/45/56
投稿:samo いいね数0の投稿の分割
私のイメージ的には、以下の様な感じです。（中略）
### 解像度自動調整機能
ボタン操作一つでAIが即座に内容理解を最適化します：
- **タップするだけで深度調整**：一度のタップでAIが自動的に解釈を変更し、その人に合った詳細度に調整
- **3段階表示**：全体俯瞰（マクロ）→テーマ別（メソ）→個別意見（マイクロ）を直感的に行き来
- **自動要約エンジン**：複雑な意見でも簡潔な要点として表示、必要に応じて詳細表示
### 馴染みのGUIパターン活用
既に使い慣れたインターフェースを応用し、学習負荷を最小化：
- **地図アプリ的ズーム感覚**：ピンチイン・アウトの感覚で意見の深さを調整
- **SNSライクなカード表示**：馴染みのある形式で意見を閲覧
- **絵文字・リアクション機能**：日常的に使うコミュニケーション方法を踏襲
このアプローチにより、スマホやタブレットの基本操作さえできれば、誰でも直感的に使えるシステムを実現。AIによる自動解釈と既存GUIパターンの組み合わせで、複雑な操作学習なしに多様な都民の意見を効果的に収集できます。

https://large-scale-conversation-sandbox.discourse.group/t/topic/45/57


## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:** なし

---

### [他のAIとの連携性を深めるため、サイト全体の情報をテキストでコピー可能にする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/84)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T07:14:02Z  
**内容:**

## 解決・改善したいこと

投稿:samo いいね数2の投稿
### 現状の課題
論点整理モジュールを長く使用していると、以下のような問題を感じています:
- 回答がだんだんパターン化していく印象がある
- 使い込むほど似たような回答が繰り返され、ストレスになる
- 質問の仕方にも改善の余地があるが、システム側にも課題がある
### 提案内容
サイト上の論点すべての進捗状況を他のAI（PerplexityやノートブックLMなど）に取り込み、論点整理モジュールとは別のAIとのやり取りを通じて思考を深める仕組みを作りたいと考えています。

#### 期待されるメリット:
- 都政改善のための新しいアイデア発掘の可能性が広がる
- 既出アイデアとの重複を回避しやすくなる
- 既出アイデアが到達した地点から議論を発展させやすくなる

## 具体的な実現方法・実装方法の概要（未記入でも構いません）
### 具体的な実装希望
このサイトで扱われている論点は多岐にわたるため、各論点のまとめを一つずつ開いてコピー＆ペーストする作業は非効率です。そこで次のような機能を希望します:

- 現在のすべての論点についての議論内容
- それぞれの論点に関するコメント
- 各論点の進捗状況

これらを網羅したページを作成していただきたいです。そうすれば、そのページの内容を一括でコピーしてテキストファイルに保存し、普段使用しているAIに取り込むことができます。

#### 最終的な活用イメージ:
別のAIとのやり取りを通じて深めた考察を整理し、再度「東京井戸端会議」の論点整理モジュールに還元することで、より充実した都政の議論が可能になると考えています。

url:https://large-scale-conversation-sandbox.discourse.group/t/topic/45/51


**コメント:** なし

---

### [ビジュアル分析のリンク追加](https://github.com/digitaldemocracy2030/idobata-analyst/issues/83)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T06:38:35Z  
**内容:**

## 解決・改善したいこと
投稿:314 いいね数5の投稿の分割
- そのトピックの論点整理モジュールへのリンクをフッターに入れる:
  - QRコードでも良い
  - 論点整理モジュールはトピックのタイトルをネットで検索しても出てこないので導線を作る
  
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/50
## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:46:51Z):

- 画像でシェアする想定なら URL 手打ちはしんどいので QR コードになりそう
- ただ、画像の上に乗っている URL や QR コードをわざわざ開く人はほとんどいないはず（手間がかかるので）
- SNS シェア導線でシェア時のデフォルトメッセージに URL を入れておくのが自然で遷移率高そう
    - ただ、最近の X では URL 入り投稿は imp 減ってしまう件とは相性が良くない... https://www.watch.impress.co.jp/docs/news/1642725.html


- **jujunjun110** (2025-03-29T07:45:26Z):

https://github.com/digitaldemocracy2030/idobata-analyst/issues/81

と同様なのでこちらはCloseします

---

### [ビジュアル分析のフッダーに名称追記](https://github.com/digitaldemocracy2030/idobata-analyst/issues/82)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T06:37:22Z  
**内容:**

## 解決・改善したいこと

投稿:314 いいね数5の投稿の分割
- デジタル民主主義2030の論点整理モジュールであることをフッターに明記する:
  - デジタル民主主義2030のロゴがあるのであればそれを入れるとか

https://large-scale-conversation-sandbox.discourse.group/t/topic/45/50

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:35:51Z):

フッターはあまり目に入らなさそうなので別の対応が良さそう

本体のもう少し目立つ位置にロゴを入れたり、https://github.com/digitaldemocracy2030/idobata-analyst/issues/81 で生成する画像にロゴを埋め込んだり、OGP 画像にロゴを埋め込んだりするのが良さそう

---

### [ビジュアル分析をシェアしやすいUIにすることで、良い分析をみた参加者が画像とURLをSNSで共有しやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/81)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T06:35:38Z  
**内容:**

## 解決・改善したいこと
投稿:314 いいね数5の投稿の分割
- XなどSNSで投稿しやすいように、画像としてダウンロードするボタンを作る:
   - 一定の長さで縦n分割にしてダウンロードするボタンを作るとさらに良さそう

https://large-scale-conversation-sandbox.discourse.group/t/topic/45/50

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:32:33Z):

SNS シェアボタンがあったり OGP 設定されていたりするとより効果的なシェア促せるかも

---

### [AIチャットが、会話内容をDiscourseに投稿しやすいような文章に整形してくれて、投稿を促す機能をつけると投稿ハードルが下がるのではないか](https://github.com/digitaldemocracy2030/idobata-analyst/issues/80)

**作成者:** jujunjun110  
**作成日:** 2025-03-27T02:06:09Z  
**内容:**

## 解決・改善したいこと

いま、privateチャットは結構使われるが、Discourseへの投稿ハードルは高いという事実がある
ここをうまく接続することで、Discourseが盛り上がるのではないか。

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

一定以上チャットを進めると、AIが意見をまとめスレッドへの投稿をサジェストする発言を行うようになる

**コメント:** なし

---

### [意見まとめで、円グラフと散布図を両方表示できるようにすることで、より包括的に意見のばらつきを理解できるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/79)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T02:04:08Z  
**内容:**

## 解決・改善したいこと

投稿:314 いいね数0の投稿
「AIによる意見まとめ」では、出た意見の量的割合が円グラフで示されていますが、意見の割合を示すよりも、TTTCの意見の散布図のようなものの方が良いと思います
散布図の方が分析コストが高くなってしまうかもしれませんが、円グラフでどの意見が多いかを知ることにはあまり意味がないように感じました
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/40

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:23:19Z):

ある論点に対する意見の割合を表す円グラフと、色々なコメントの中でどのような論点があるかを表す散布図があって、前者ではなく後者が見たいという意見のよう（おそらくケースバイケースなので、どういう場面でどっちを表示すると良いかを深堀りしたい）

---

### [コメント一覧での情報源を常時表示可能にする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/78)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T02:00:46Z  
**内容:**

## 解決・改善したいこと

投稿:akinori いいね数0の投稿
「論点整理モジュール」の「コメント一覧」や「論点ごとの分析」下の各意見の「派」以下に表示されるコメントの情報源「その他」について、吹き出し表示される部分を常時表示可能＜にも＞選択できるようにしてほしい。

要約が表示されるのは嬉しいのですが、詳細をマウスオーバーして閲覧するのが、少し煩雑です。また、小さい表示でもコメントの記録時刻(または日付)表示があると登録順に表示されるなら、遡る範囲が特定できて嬉しいです。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/35


## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:14:54Z):

細部をカスタマイズ可能にするのは今は避けたい気がする（隠し機能的になり利用者メリット薄くなる一方でメンテナンスコストは増えるので）

正解のデザインさえ固まれば good first issue そう

---

### [チャットの履歴を保存できるようにすることで、参加者がより継続的に深く論点に対しての理解を深められるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/77)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T01:55:47Z  
**内容:**

## 解決・改善したいこと
投稿:mango いいね数3の投稿
チャットでAIと議論してみました。
議論に終わりがないので中断して翌日再開、が出来ると良いと思いました。現状ではブラウザを開いたまま残すしかなさそうです。
マイページ(自分の投稿)から履歴呼び出せるといいですね。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/30
投稿:mango いいね数0の投稿
一晩経ったら画面の接続が切れ、仕方なく再読み込みしたら会話履歴が消えてしまいました。また1から話すのは辛いです。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/37
投稿:akinori いいね数2の投稿の分割
ブラウザ操作での再読み込みは禁止する方法があってもいいかもしれないですね。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/38


## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:** なし

---

### [意図しない要約の防止](https://github.com/digitaldemocracy2030/idobata-analyst/issues/76)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T01:39:59Z  
**内容:**

## 解決・改善したいこと

投稿:akinori いいね数1の投稿
ダウンロードに「 論点整理モジュール」と話した内容も含んでほしいです。または、「AI と議論した内容もAI レポートに反映される」とのことなので、反映の有無と可能であれば反映する内容を指定したいです。意見を所有したいわけではないですが、意図しない文言での反映が行われるのを避けたいです。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/12
投稿:akinori いいね数1の投稿の分割
![Image](https://github.com/user-attachments/assets/46e2cdd6-a0bf-4c0c-993a-d5f55cacb404)
また、要約時の編集によって、意図していない内容に変わる可能性もあります。「同時に多様な学び方に触れる必要があります」と記載したのですが、「同一人物であっても多様な学び方に触れる機会を提供する必要がある」となって記録されました。

論理的な漏れや異なる意図に解釈できる場合には、念のため確認してくれる方が嬉しいかもしれません。また、本返信の時に実施してもらえると、より解釈が割れないような返信にできるのかもしれません。

こうあるべきだ、とお伝えしているわけではありません。何かの参考になりましたら嬉しいです。
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/13

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:08:52Z):

https://github.com/digitaldemocracy2030/idobata-analyst/issues/39 と似た内容なので、そちらで解消できるかもしれない

- **jujunjun110** (2025-03-29T06:22:48Z):

精度をなるべく上げることでなるべく不満を発生しにくくすることしかできなそう
#39 に吸収する形でCloseします

---

### [分析時に投稿をユニークなユーザーIDでカウントすることで、多重投稿した人の意見の重みが過剰に出ないようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/75)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T01:13:14Z  
**内容:**

## 解決・改善したいこと

投稿:westcoaster いいね数2の投稿
暇人なのでめっちゃコメントしまくっているのですが、複数回コメントしたときに、「自分一人の意見なのに、投稿が分かれているせいでこれが◯件とまとめられてしまうのが申し訳ない…」という気持ちに。
レポートにも「 本分析で使用した情報ソースでは、一人のユーザーが複数の意見を投稿できる仕様となっているため、数値はあくまで参考情報としてご認識ください。」とありますが、分析にかける前にIDごとにgroup byするみたいなことは難しいのでしょうか？

（ちなみに、投稿一発目がたたき台の提示となってかなり意見を考えやすくなりました！）

https://large-scale-conversation-sandbox.discourse.group/t/topic/45/9


## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **spinute** (2025-03-29T03:05:12Z):

データソースが discourse だけなら user id でまとめると良さそうだが、X, Youtube など複数のプラットフォームが入ると名寄せが難しく、人数ではなくなってしまうのをどう表現すると良いか🤔

- **itoma-aikon** (2025-03-29T09:00:11Z):

Xやyoutubeでもアカウント名があるからそれを使うのがいいのでは（別のプラットフォームで投稿する人は少数と予想）
メルアドで紐づけれたら楽だと思うけど、非公開である以上割り切る必要はありそう

---

### [レポートの用途解説](https://github.com/digitaldemocracy2030/idobata-analyst/issues/74)

**作成者:** itoma-aikon  
**作成日:** 2025-03-27T01:10:27Z  
**内容:**

## 解決・改善したいこと

投稿:westcoaster いいね数1の投稿の分割
AI教育のところでレポートが投稿されたが、このレポートで示された新しい論点しか議論しちゃいけないわけじゃないんですよね？このレポートをどう使ってほしいかもうちょっと説明があった方が親切な気がしました（論点の整理・議論を深めたいポイントの提示だけど、元々の論点についても引き続きコメントしていいんですよね）
https://large-scale-conversation-sandbox.discourse.group/t/topic/45/5

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:**

- **jujunjun110** (2025-03-29T07:56:13Z):

ファシリテーションの改善にマージしてこのトピックはClose

---

## 過去1週間に更新されたissue（作成・クローズを除く）(21件)

### [ビジュアル分析タブの余白を調整し、スマホで表示した際にも快適に内容を理解できるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/72)

**作成者:** spinute  
**作成日:** 2025-03-25T07:47:25Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

ビジュアル分析タブをスマホで表示すると、横方向に過度に余白があって見にくい

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

![Image](https://github.com/user-attachments/assets/3f9efec6-454b-45d5-919f-20a9d08bb10c)

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

レポートが4重の入れ子 div の中に入っているが、外の3つは不要そう

スマホだと画面幅が狭く特に見づらいが、PC でも無駄なスペースを使っているので、そもそも div の入れ子を減らして良い気がする

**コメント:**

- **spinute** (2025-03-29T12:58:05Z):

/assign

---

### [GitHub Actions で test, linter を実行するようにすることで、開発者が安心してコードの品質を高く保てるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/71)

**作成者:** spinute  
**作成日:** 2025-03-23T12:11:05Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

CI で test, linter を実行し、スタイルやコード品質のベースラインをキープできるようにしたい。

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

- PR に対し、frontend, backend, chat-bot それぞれについて、linter を走らせ、テストを実行する GitHub Actions を定義する

**コメント:**

- **takker99** (2025-03-31T04:42:39Z):

https://github.com/digitaldemocracy2030/idobata-analyst/pull/91 がmergeされたらassignしたいと思ってます。
`npm run lint:all`を実装したので、それを使えば少々楽に書けるかなと

- **takker99** (2025-03-31T04:44:47Z):

たぶんこれでいけます。
```yml
name: lint

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
      - name: biome check
        run: npm run lint:all
```

---

### [バックエンド のテストを導入することで、開発者が継続的にコード品質をキープしやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/70)

**作成者:** spinute  
**作成日:** 2025-03-23T12:06:57Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

/packages/backend のテストがない

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

jest を使って簡単なテストを導入する

/package/chat-bot には既に導入済みなので、それを参考にすると良いかもしれない

**コメント:** なし

---

### [frontend のテストを導入することで、開発者が継続的にコード品質をキープしやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/69)

**作成者:** spinute  
**作成日:** 2025-03-23T12:06:36Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

/packages/frontend のテストがない

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

jest を使って簡単なテストを導入する

/package/chat-bot には既に導入済みなので、それを参考にすると良いかもしれない

**コメント:** なし

---

### [AIのレスポンスをキャッシュするようにすることで、開発時の動作確認で AI 費用がなるべくかからないようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/63)

**作成者:** spinute  
**作成日:** 2025-03-23T06:21:16Z  
**内容:**

## 解決・改善したいこと

<!-- この提案はどのようなものかを説明してください。また、どのような人がどのように嬉しい提案なのかを、できればユーザーを主語にして記載してください。 -->

開発中に繰り返し動作確認することになるが、OpenRouter API 叩くたびに課金され、お財布に優しくないかも。

<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

ref: https://w1740803485-clv347541.slack.com/archives/C08FL58M3D3/p1742708110238619

## 具体的な実現方法・実装方法の概要（未記入でも構いません）

実現方法は例えば以下：

- OpenRouter のレスポンスをキャッシュする仕組みを作る
    - ⭕️汎用な仕組みなので動作確認以外の場所でも恩恵を受けられる
    - ❌️費用はゼロにはならない
- 動作確認用の小さなデータを作る
    - ⭕️データ量と費用が概ね比例するので、小さいデータなら単価が安くなる
    - ❌️データが小さいと結果が面白くなくなったり動作確認力が下がったりする
    - ❌️リクエストのたびに小さいながらコストは発生する
- 動作確認用のデータだけは事前に取得済みのデータを埋め込んでおいて、OpenRouter API をバイパスして元々あるデータを使ってしまうようにする
    - ⭕️（動作確認の範囲では）コスト0になる
    - ⭕️キーなしでも最小限動かせるようになる（フロントエンドだけ触る人とかの入門ハードルが下がる）
    - ❌️データ更新やバイパス処理が入ってメンテナンス性が下がる

おそらく1つ目のものがメリット大きく負債にもなりにくそうで筋が良さそう。

https://github.com/digitaldemocracy2030/idobata-analyst/blob/main/packages/backend/src/services/openRouterService.ts に OpenRouter へのリクエストは集約されているので、ここにキャッシュ機構をうまく挟めば良さそう。

副次的なメリットとして、API 叩く回数が減れば処理もかなり早くなるので開発効率も良くなる。

**コメント:**

- **takahiroanno** (2025-03-23T09:49:37Z):

方針１、良いと思います！

---

### [論点抽出の仕組みを改善することで、議論に対して的を得ていて、より活発な議論をもたらす論点をAIが抽出できるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/58)

**作成者:** blu3mo  
**作成日:** 2025-03-21T11:23:43Z  
**内容:**

今のパイプラインには2つのステップがある
  - 1 大量の意見から、論点と、各論点における派閥を抽出する
  - 2 各コメントに対して、各論点の派閥をラベル付けする
 **このうち、1（論点抽出）の仕組みを改善したい**

## 現状
  - Geminiに全コメントを放り込んで、雑に論点を5個抽出させている
    - https://github.com/digitaldemocracy2030/idobata-analyst/blob/main/packages/backend/src/config/prompt-templates/question-generation.txt
    - Geminiのコンテキスト幅の長さに甘えている
    - ベースラインとしては良いが、もっと良い方法があると思う

## 目指したい方向
  - 目的：「論点を抽出しつつ各コメントの立場を整理すること」によって、「DiscourseやSNSで①議論が深まり②参加者が増えるようなレポート/エージェントを動作させたい」
    - そのためにできると嬉しいことの例
      - 「マイナーだけど重要な論点」を発見したい
      - 新しい議論を生み出すような論点を発見したい
      - アテンションを集められるような賛否両論がある論点を発見したい
      - 存在する論点を全て網羅したい
      - 他にも色々ありそう
  - その他のnice-to-haveなこと
    - 分析結果の説明可能性が高い
    - コストが低い

## 試してみたいこと
  - 下手にbefore-LLMの手法を参考にするより、LLMを使ったら何ができるかをゼロベースで考えた方が良いものが作れそう
    - よっぽどのことをやらない限り、LLMのコストがボトルネックにはならなさそう。
      - 「全コメントをgemini-2.0-flashに放り込んで立場を分析させる」とか今やっているが全然コストは許容範囲
      - 線形のオーダーのことをやっている限りは大丈夫そう
  - コメントをバッチに分けて論点を生成させた上で最後にまとめた方が細部の論点も拾えそう
    - 例えば、
    - 1: 1000件のコメントを、50件のバッチ20個に分ける
    - 2: 各バッチから5個の論点を抽出する
      - ここは今までと同じようにLLMに全部放り
      - 合計5*20=100個の論点が抽出される。中には似たものも多いと思う。
    - 3: 100個の論点をLLMに放り込んで、渾身の5個の論点を作らせる
    - これは結構さくっと試せそう
  - 「100個の論点を作って、派閥のラベル付けをやって、そのデータを元に論点を5個選ぶ」みたいなやり方もありそう
    - 「100個の論点から5個の論点を選ぶ部分」の仕組みが色々探索できそう
    - n個のコメントがある時に各論点をn次元のベクトルとして捉えて、もっとも直交している五個のベクトルを選ぶ、とか
      - PolisやRemeshが近いアプローチの分析をやっている
        - https://pol.is/
        - https://arxiv.org/html/2503.01769v2
      - これは、分析結果の説明可能性が高い点が良いと思う

## (イシューのスコープ外だが)前提を疑う話
  - 今の「1 論点抽出 → 2 派閥をラベル付け」という設計より良い方法がある？
  - 今の設計の良いところ:
    - 1さえ何とかできれば、2の部分はいくらでもスケール可能
      - 100億件のコメントが来てもこのシステムは同じように動作する
      - コストは線形に伸びていくが、、
    - 新しいコメントが追加された時には2だけやればいいので、低コスト/一瞬でそれを分析結果に組み込める
    - そもそも「論点を抽出してコメントを整理すること」が「DiscourseやSNSで①議論が深まり②参加者が増えるようなレポート/エージェントを作ること」の役にたつのか？

**コメント:**

- **spinute** (2025-03-23T09:31:05Z):

@blu3mo issue 書いていただいてありがとうございます！

まだプロジェクトの全体像もコードも不案内なので、初手は助言いただきつつ具体的なアクション固めて着手してみるのがいいかなと思いつつ、前提の話も丁寧に書いていただいたのでそのへん自分の理解や感想も↓にメモしておきます📍

--

このシステムの成功には以下2点が重要：
1. 参加者が増えること（政治に関するシステムなので、多くの人が参加すること自体に価値がある）
2. 情報が増えること（情報が増えると意思決定の質が向上する）

参加増には個人のモチベーション・インセンティブが重要。
フィードバック構造があり、自分の関与や貢献が正しく評価されることがキーになる。
コメントが意味的に正しく整理されていると、貢献を正しく評価し効果的に可視化する際に役に立つ。

情報増にはデータの適切な整理が重要。
データは適切に分析し解釈できてはじめて情報として価値を持つ。
（↑のフィードバック構造と対称に、データから価値を引き出すプロセスをフィードフォワード構造と呼んでみる。）
情報を評価し、ギャップを特定し、改善に繋げることができる。

↑の意味で、データから論点などの構造や意味を引き出すことは重要。
一方で、論点抽出はフィードフォワード構造・フィードバック構造の要素技術である。

これを踏まえると、論点抽出改善の2つの進め方が見えてくる：
1. 今見えている明らかな課題を解消する（例：論点5つにカットする際に情報ロスがあり、ロスの少ないやり方を考える。情報が落ちない方が良いのはほぼ自明）
2. フィードフォワード・フィードバックの構造の具体化を先行し、その後改めて課題を特定する。e2e で動くようになればボトルネックが明確になるはずなので、そこでまた課題解決する

--

質的な問題と量的な問題でいうと、質的な問題の解決を優先したい気がする。
価値検証が済めば、計算量やコストの観点で効率的な how は優秀なエンジニアがだいたいなんとかしてくれるはず。

--

ベットすべきトレンドは LLM/AI の進化が当面すごい勢いで続くこと（根拠の例：<https://blog.samaltman.com/three-observations>）。
そうすると、LLM/AI に委ねる方針が良さそう（なるべく情報をロスせず、LLM/AI 以外の処理を減らす）。
例えば「〜な論点を発見したい」系の課題は、全データを AI に見せて AI に解かせる方針が筋が良さそう（といいつつ、今使えるものを作るためにエンジニアリング観点での割り切りや工夫をすることもあるだろう）。

--

今の処理への感想（処理まだちゃんと追っていないので直感的なもの）：
- 5とか20とかマジックナンバーを減らしたい。デフォルト値はありつつ柔軟&低コストに変更し再計算できる仕組みが嬉しそう
- 論点をコメントから作ると誰も言及していない論点が出てこない。外の世界（インターネット、オフライン、LLM/AI の知能）に良い論点があるなら取り込めるようにしたい
- 抽出とラベリングは本当は e2e で最適化したい気がする。ただ分割するのがエンジニアリング的に都合良さそうなのも理解できる

- **spinute** (2025-03-23T09:38:54Z):

主題、論点、コメント、派閥、人あたりの関係を数理的に扱うことになりそうで、共通言語になりそうなモデルもあれば知りたいです！（特に「派閥」の正確な意味がまだわかっていない気がしています）

モデルがあるとこの issue は「ある主題に対し良い論点集合（例：主題との関連度が高く、相互の独立性が高い論点集合）を発見・抽出する問題」とかになるかも？

- **takahiroanno** (2025-03-23T10:04:50Z):

- 個人的な問題意識をメモ
  - 上流の #39 を先に解決した方がこのissueの精度も上がりやすいと思います
  - 良い論点分解とは何か？　というのはかなり戦略系のコンサルティング会社では長年の経験によって進化してきた作法があり、その考え方はこのプロジェクトの論点抽出においても有効だと思われる
    - 参考図書
      - [論点思考](https://www.amazon.co.jp/dp/4492556559)
      - [イシューからはじめよ](https://www.amazon.co.jp/dp/B0DCGDMCVD/)
      - [プロフェッショナリズムと問題解決の実践](https://note.com/tokyo_harbor/n/n8be4ace236e6)
  - プロフェッショナリズムと問題解決の実践、にある論点の定義は面白いなと思う(LLMに明確に指示しやすいという意味で）
    - 論点とは行動を決めるための問いであり、必ず「べき」が含まれる
      - 苦しい場合でも「べき」は入れる規律を守ったほうが明確になる
      - ex) 市場シェアはどのように推移してきたのか？ → 市場シェアはどのように推移してきたと想定するべきか？
    - 論点は一文で明文化する
    - 論点は小論点に構造的に分解する
      - 小論点の白黒がついたら大論点の白黒も着く形で分解する
  - イシューからはじめよ、にある論点の定義も面白い
    - 二つ以上の集団の間で決着のついていない問題
    - 根本に関わる、もしくは白黒がはっきりしていない問題



- **spinute** (2025-03-23T11:14:39Z):

ありがとうございます、一旦 #39 に向かいます！

---

### [ビジュアルレポートのタイトルに作成日時が被っているのを改善することで閲覧者が読みやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/57)

**作成者:** nishio  
**作成日:** 2025-03-21T02:25:08Z  
**内容:**

## 解決・改善したいこと

<img width="807" alt="Image" src="https://github.com/user-attachments/assets/b6f050dd-607f-4db4-9e1d-0dd3dec04e7c" />


<!-- 対象画面の URL や関連する議論や資料の URL があれば、添付いただけると理解の助けになります。 -->

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:** なし

---

### [分析開始前に、分析にかかるAPI費用を計算して表示することで事前に影響が分かるようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/56)

**作成者:** blu3mo  
**作成日:** 2025-03-21T00:07:30Z  
**内容:**

## 解決・改善したいこと

CSVアップロードの画面にてファイルをアップロードした後、分析を開始する前に「合計〇〇USDかかります」と表示されてほしい。
抽出フェーズと論点分析フェーズの合計費用がわかると良さそう。

## 具体的な実現方法・実装方法の概要（未記入でも構いません）
CSVのデータさえあれば、いくらかかるのか概算できるはず。
OpenRouterのGemini費用: https://openrouter.ai/google/gemini-2.0-flash-001
概算できればニーズは満たせると思うで、「全コメントの合計文字数 x 係数」みたいな計算でも良さそう。

**コメント:**

- **blu3mo** (2025-03-21T00:08:04Z):

talktothe.city のこれみたいなイメージ。
![Image](https://github.com/user-attachments/assets/710be27c-035f-47c7-ab49-c20b90b87421)


- **blu3mo** (2025-03-21T00:08:58Z):

https://github.com/digitaldemocracy2030/kouchou-ai/issues/79
こうちょうAIの方でも同じことに取り組んでいるみたい。参考までに。

---

### [ビジュアルレポートの生成プロンプトを改善することで、SNS上などで見た人が論点やプロジェクトについて理解したり興味を持ちやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/46)

**作成者:** blu3mo  
**作成日:** 2025-03-19T01:11:50Z  
**内容:**

## 解決・改善したいこと

https://large-scale-conversation-sandbox.discourse.group/t/topic/45/50
論点整理モジュールのビジュアル分析についてです。
ビジュアル分析はかなり分かりやすく、かつ、柔らかいデザインで良いと思います。拡散してもらいやすくするために、

XなどSNSで投稿しやすいように、画像としてダウンロードするボタンを作る:
一定の長さで縦n分割にしてダウンロードするボタンを作るとさらに良さそう
デジタル民主主義2030の論点整理モジュールであることをフッターに明記する:
デジタル民主主義2030のロゴがあるのであればそれを入れるとか
そのトピックの論点整理モジュールへのリンクをフッターに入れる:
QRコードでも良い
論点整理モジュールはトピックのタイトルをネットで検索しても出てこないので導線を作る
というのはどうでしょうか

## 具体的な実現方法・実装方法の概要（未記入でも構いません）


**コメント:** なし

---

### [extractionフェーズで過度な捨象が発生してしまうのを避けたい](https://github.com/digitaldemocracy2030/idobata-analyst/issues/39)

**作成者:** blu3mo  
**作成日:** 2025-03-17T00:40:13Z  
**内容:**

## 解決・改善したいこと
- extractionフェーズで過度な捨象が発生してしまうのを避けたい。
例：
![Image](https://github.com/user-attachments/assets/30ac4f8d-ba41-4ea6-baec-c57a9114dd7d)
> 安野貴博
  9:28 AM
extractionフェーズで過度に捨象されている例。このぐらいの文量ならまるめなくてもいいようなきがする


## 具体的な実現方法・実装方法の概要（未記入でも構いません）
- プロンプトを修正して過度な捨象を避ける
  - 「適切なextraction」の定義が難しいが、少なくとも現状は捨象しすぎだと思う。特に、主張を抽象化してしまうことで元投稿が言ってないことまでextraction後に書かれてしまうのは望ましくないと思う。

**コメント:**

- **spinute** (2025-03-23T11:13:35Z):

/assign

- **spinute** (2025-04-02T08:57:39Z):

課題とやること具体化してみた

- この機能で実現したいこと：論点に関する意見（コメントに含まれるその論点に関する主張）をまとめたい
- 今の課題：コメントから意見を抽出する際に、不要な加工や過度な捨象が発生してしまうことがある
- 機能の要件：
   - 意見は長すぎない方が良い
   - 意見には論点に関係ない内容は含まれない方が良い
   - 意見には不必要に加工されていない方が良い
   - 意見が加工されている場合は加工されていることを明らかにしたい。またその過程がわかる
- この issue でやること：
   - 短く、論点に関する内容が中心のコメントは加工せずに表示する
   - 論点に関連する箇所が明確になるよう表示を工夫してもいいかもしれない
   - 長すぎるコメントは要約する（論点に関係ない箇所は削ぎ落とす。論点に関する箇所のみでもながければ短く表現し直す）
   - 加工されたコメントは加工されていることを明記する。また加工前のコメントを表示できるようにする

---

### [開発環境で管理者モードへアクセスできるボタンを用意することで、初期設定時に管理者モードになる迷いを減らす](https://github.com/digitaldemocracy2030/idobata-analyst/issues/34)

**作成者:** jujunjun110  
**作成日:** 2025-03-16T00:16:45Z  
**内容:**

開発環境で管理者モードにアクセスする際、URL を手打ちする必要があって（少しだけ）手間がかかる。

現手順：https://github.com/takahiroanno2024/idobata-analyst?tab=readme-ov-file#%E7%AE%A1%E7%90%86%E8%80%85%E3%83%A2%E3%83%BC%E3%83%89%E3%81%B8%E3%81%AE%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9

開発環境だけの機能になりそうだが、管理者モードにアクセスするためのボタンを置いたり、管理者モードをデフォルト有効にしたりするとひと手間減りそう。

開発に参加するハードルが下がって嬉しいが、開発環境を構築時に一度だけやる作業なので重要度はさほど高くない。

**コメント:**

- **spinute** (2025-03-29T03:57:30Z):

@jujunjun110 

こちら内容よくわからず、issue 投稿用 Google form の動作確認？投稿中？かなと思い、内容更新いただくか閉じるかをお願いできますでしょうか！🙏

- **jujunjun110** (2025-03-29T06:11:04Z):

こちら当時の実装ミスでフィールドがずれていたようなので復元しました！

---

### [議論まとめモジュールにグラウンディング機能を追加する](https://github.com/digitaldemocracy2030/idobata-analyst/issues/31)

**作成者:** jujunjun110  
**作成日:** 2025-03-15T13:05:26Z  
**内容:**

内容なし

**コメント:** なし

---

### [議論まとめモジュールにテールの部分の論点を含める](https://github.com/digitaldemocracy2030/idobata-analyst/issues/30)

**作成者:** jujunjun110  
**作成日:** 2025-03-15T13:05:05Z  
**内容:**

内容なし

**コメント:** なし

---

### [OpenRouter apiの残りクレジットが少ないときにアラートを出すことで、クレジットが減ってエラーが出やすい状況に気づきやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/22)

**作成者:** blu3mo  
**作成日:** 2025-03-12T06:15:05Z  
**内容:**

OpenRouter、creditの数に比例してquotaが増えていく仕様になっていて、
- 33 creditで元のGCPのquotaと同程度。たまにfailする。
- 常時100 credit以上あれば安心
といった肌感です。

Shutaro Aoyama (Bluemo)
  2分前
クレジットが減ってくると「リクエストが失敗する確率がじわじわ高くなる」という気づきづらい形で影響が出るので、安定して$100以上補充されているようにしたいですね


Shutaro Aoyama (Bluemo)
  たった今
apiで残りクレジット見れそうなのでそれを使ってアラートが出せそう

**コメント:**

- **spinute** (2025-03-16T19:07:56Z):

表示先は開発者向けということで（ブラウザ上ではなく）コンソール上で十分そうでしょうか？

OpenAI を使った OpenRouter の呼び出し（とそれに付随する入出力処理・リトライ・ロギング・例外処理）が色々なところに書かれているのを openRouterService.ts 等作って集約し、そこでこの PR の変更を入れる流れはどうでしょうか？（first issue としてやってみようかなと思っています！）

- **blu3mo** (2025-03-16T23:35:36Z):

> 表示先は開発者向けということで（ブラウザ上ではなく）コンソール上で十分そうでしょうか？

おっしゃる通りで、ブラウザ上の表示は不要です。
システムを運用している人が気づけると良いので、webhook通知をslackに投げられるとbetterだと思います！

>  openRouterService.ts 等作って集約

良さそうです！ありがとうございます。

- **spinute** (2025-03-20T04:03:39Z):

やっていき！

- **spinute** (2025-03-20T13:28:29Z):

残クレジットをチェックしてアラートを出す処理も実装した https://github.com/spinute/idobata-analyst/pull/3

本当は Slack に通知を飛ばしたいが、Slack workspace の権限が必要な気がするので一旦 console.log にしている

- **spinute** (2025-03-20T13:29:07Z):

/assign

- **jujunjun110** (2025-03-29T06:31:47Z):

WIPぽかったのでIn Progressに移しました。
PRついたらIn ProgressになるAutomationがあったのではという気はするが...

---

### [AIチャットの論点引用の際に論点へのリンクをつけることで、利用者がその論点についての理解を深めやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/21)

**作成者:** blu3mo  
**作成日:** 2025-03-12T05:25:05Z  
**内容:**

<img width="473" alt="Image" src="https://github.com/user-attachments/assets/38b5d004-d44d-4086-bdca-5617f53e3eeb" />

**コメント:** なし

---

### [コメント数が0件の論点について、0件である旨を表示することで、ユーザーが無駄に読み込みを待ってしまうことを防ぐ](https://github.com/digitaldemocracy2030/idobata-analyst/issues/20)

**作成者:** blu3mo  
**作成日:** 2025-03-12T02:15:59Z  
**内容:**

https://large-scale-conversation-sandbox.discourse.group/t/topic/76/34

これはそもそも論点にヒットしているコメントが0件なのが問題ですね。
コメントが存在しないのでグラフも当然表示されない。

コメント数0件の時に円グラフを空っぽにするのではなく、「コメント数が0件です」と表示する、あるいは論点をそもそも表示しないようにしたい。後者の方が良いかも？

**コメント:**

- **takker99** (2025-03-16T08:13:09Z):

https://delib.takahiroanno.com/projects/67cf6b70d84a8a8279ebfbc6/analytics?question=c6f5feae-d49b-4a2e-86f2-49bd3b946174
このページの空欄を表示しないようにする感じですね。

Discourseの埋め込みは、まだコメントがない旨を表示するしかないかな。

- **blu3mo** (2025-03-16T08:32:24Z):

ですね！

---

### [論点タブをコメント数が多い順に表示するようにすることで、重要な論点を理解しやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/16)

**作成者:** blu3mo  
**作成日:** 2025-03-12T02:08:37Z  
**内容:**

----
論点を「関連するコメントの数」でソートして、論点タブ（添付画像）をその順番に並び替えたい
• 例えば、<https://delib.takahiroanno.com/projects/67b89dca8b236a3238bdc25e/overall|このプロジェクト>において<https://delib.takahiroanno.com/projects/67c7c8cd858bc4c6ea297050/analytics?question=0c843650-a765-4be1-9a74-3dfd04312e61|論点2>より<https://delib.takahiroanno.com/projects/67b89dca8b236a3238bdc25e/analytics?question=4e4e1572-7470-4e57-8c99-aa8157b2a903|論点3>の方が関連するコメントの数は圧倒的に多いので、後者のタブの方が左に置かれていてほしい。この時に論点番号をどう扱うかは要検討。
• （脱線）「関連するコメントの数」以外にもいろいろな尺度で論点の比較評価ができそう。
    ◦ 派閥の数、論点同士の相関、etc。
    ◦ ここはデータで遊ぶと色々面白いことができそうな予感

[Slack Message](https://annyotakagmailcom.slack.com/archives/C0858TLQSAY/p1741243043949329?thread_ts=1741240865.781019&cid=C0858TLQSAY)

**コメント:** なし

---

### [コメントの左側のバーの色を、各立場（スタンス）に対応する円グラフの色と一致させることで、読み手が理解しやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/15)

**作成者:** blu3mo  
**作成日:** 2025-03-12T02:08:13Z  
**内容:**

---
• <https://delib.takahiroanno.com/projects/67c7c8cd858bc4c6ea297050/analytics|論点ごとの分析ページ>にて、「円グラフの色」と「コメントの左についているバーの色」を一致させられると見やすそう。
    ◦ 今は「コメントの左についているバーの色」は全部青になっているが、これを「円グラフの色」の青緑橙と一致させたい。
    ◦ フロントエンドだけ触れば対応できる

![Image](https://github.com/user-attachments/assets/b11cf0e2-c381-411a-9fb2-3ff1d56e97b0)

**コメント:**

- **spinute** (2025-03-29T13:54:28Z):

@javasparrows 
こちら PR 出てるかと思うのですが、その後ご状況いかがでしょうか？

https://w1740803485-clv347541.slack.com/archives/C08F7JZPD63/p1742383728507089 にあるように assign コマンド打っていただけると issue がアサインされる仕組みが出来たので、実行していただけると助かります！

また、もし PR 完成させる時間が取れないようでしたら、他の方に途中から引き継いでいただくこともできるかと思うのでお知らせください🙏

---

### [論点整理モジュールのタブの構造を整理しわかりやすくする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/12)

**作成者:** blu3mo  
**作成日:** 2025-03-12T02:06:42Z  
**内容:**

![Image](https://github.com/user-attachments/assets/5aa01f19-b18e-43e4-b685-5fcc36b0efdf)

• 「チャット」だけだと何のタブかわからない
• 「チャット」だけレポート見る他の３つとレイヤーが違うのでその違いが視覚的に理解できるとより良い
• 「コメント一覧」の「コメント投稿」と「チャット」は実はreadじゃなくてwriteなのでここも関係性を整理できると良さそう

[Slack Message](https://annyotakagmailcom.slack.com/archives/C0858TLQSAY/p1741259395685089?thread_ts=1741259326.053629&cid=C0858TLQSAY)

**コメント:** なし

---

### [全体レポートにmarkdownと出てしまうのを修正し、読み手の違和感を防ぐ](https://github.com/digitaldemocracy2030/idobata-analyst/issues/10)

**作成者:** blu3mo  
**作成日:** 2025-03-12T01:36:49Z  
**内容:**

markdownって出ちゃう
https://delib.takahiroanno.com/projects/67b88d408b236a3238bb11a7/overall

![Image](https://github.com/user-attachments/assets/d43bb596-6ac8-4e7f-9ca8-d785a86f9c92)

これの問題は、LLMが

<img width="146" alt="Image" src="https://github.com/user-attachments/assets/96c5c1b4-e464-4357-95ac-a86bf2d89805" />

という文章を生成した時に、自動的に``` ```の部分だけ排除して、"markdown"の部分を排除してくれないこと。
markdownという文字も出力されてしまったパターンにも対応できるようにregexとかを調整できると良さそう。あるいはgeminiのapiで出力フォーマットを指定できるっぽいので、それを導入すべきかもしれない。

**コメント:**

- **takahiroanno** (2025-03-24T00:53:22Z):

最近はもう出てないかも？

- **blu3mo** (2025-03-24T01:06:53Z):

そもそも出たのは一度だけなのでレアケースとしてまだ起こりうるかと
（LLMの出力の不確実性によって発生するレアな不具合）

---

### [チャットAIのノリを改善することでユーザーが不満感を持ちにくいようにする](https://github.com/digitaldemocracy2030/idobata-analyst/issues/9)

**作成者:** blu3mo  
**作成日:** 2025-03-06T21:35:36Z  
**内容:**

sera
  今日 12:54
「人間なら嫌いになるかも」に結構ヒントがある気がしていて、人間ならそもそも面と向かって聞かれたことを無視するのって心理的にすげえコストだけど、AIならカジュアルに「>>skip this question」押せる、みたいのはありそう

sera
  [今日 12:58](https://annyotakagmailcom.slack.com/archives/C0858TLQSAY/p1741283903576039?thread_ts=1741267883.765739&cid=C0858TLQSAY)
あと、なんか質問が残ったまま去るのがなんかモヤッとするのもわかるので、「次の質問を最後にする」ボタンを押すと、なんかまとめ的な質問をくれて、答えると「今日はこんなに色々と意見をくれてありがとう！あなたの貢献は確実に日本の民主主義を良くするよ！」みたいな褒めをくれたら爽やかに寝られそう。
(just ideaなのでもっといいやり方もあると思うけど) （編集済み）

---

https://x.com/picpie/status/1897651422361198724
> 何を言っても折れずに本当かどうかも分からないことを言い返してくるヤツは相手にする気が失せる。
これは「ユーザーと異なる考えを提示する」という設定が効いた結果こういう体験になっているのか　難しい

---

![Image](https://github.com/user-attachments/assets/a92c6f4e-cb75-486f-89f8-42bb22e5d8f0)
ここを個別最適化できるのは価値だと思うのでやりたいが、どんなチャットAIだと望ましいのだろう

安野貴博
これも色々実験してみるしかない気がするなあ。厳しく当たる場合と褒めて伸ばす場合、こちらから仮説を提示しまくる場合とそうではない場合
「どれだけチャットのターン数が伸びたか」「有益な意見がどこまで取れたか」みたいなKPIで最適化し続けるのが良い気がする

**コメント:**

- **jujunjun110** (2025-03-29T07:46:02Z):

ノリの改善は必要そうだが今のままだと曖昧なのでもう少し詳細化が必要と思います

---

